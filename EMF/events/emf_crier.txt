namespace = emf_crier

# Hear ye, hear ye...
# "A lie can run round the world before the truth has got its boots on."

### DEATH EVENTS

## Death Listener Mechanic
## 0-49 Reserved
# Death Proxy - from on_death
character_event = {
	id = emf_crier.0
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_landed_title = k_papal_state
	}

	immediate = {
		e_hip = {
			owner = {
				character_event = { id = emf_crier.1 days = 1 }
			}
		}
		log = "Event sent to Isis"
	}
	
	option = {
		name = OK
	}
}

# Isis bounce event
character_event = {
	id = emf_crier.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_alive = no }
	}
	
	immediate = {
		log = "Isis got event"
	}
	
	option = { # FROM = Pope
		trigger = {
			k_papal_state = {
				any_previous_holder = { character = FROM }
			}
		}
		name = OK
		
		if = { # Pope was sacrificed
			limit = {
				FROM = { death_reason = death_sacrificed }
			}
			# Send event to dead pope? Or to a Christian ruler? It looks like it doesn't matter, since I can control who shows up on the narrative event
			# This should probably have a larger delay: Gotta give time for the news to spread and all! (And don't want it interrupting folks who are holding blots and other get-togethers)
			narrative_event = { id = emf_crier.50 days = 7 random = 7 }
			log = "Isis sent sacrificed narrative event"
		}
	}
}

## Papal Death Flavor
## 50-99 Reserved
# Former Pope was sacrificed
# Notes: Different flavor depending on religion, might not send to parties who wouldn't care, might use distance as a factor, should have special flavor and rewards for the one who sacrificed (accessed through killer = {} scope), will have minor mechanics such as making Catholic folks hate the character who killed the Pope or reducing the authority of the religion whose leader was sacrificed, etc
narrative_event = {
	id = emf_crier.50
	title = OK
	desc = OK
	picture = GFX_evt_cathedral
	is_triggered_only = yes
	major = yes
	# show_ROOT = yes
	show_from_from = yes
	
	major_trigger = {
		ai = no
	}
	
	option = {
		name = OK
	}
}
