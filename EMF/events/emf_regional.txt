namespace = emf_regional

### EMF Regional Events Module
### Provides a framework for doing random events with a regional focus

character_event = {
	id = emf_regional.666
	desc = "Pulse"
	picture = GFX_evt_siege
	is_triggered_only = yes
	
	option = { name = OK }

}

### Regional Events Framework
### 0-99 reserved
# Sends recursive events to rulers
character_event = {
	id = emf_regional.0
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = OK
		
		any_independent_ruler = {
			character_event = { id = emf_regional.1 }
			any_realm_lord = {
				limit = { higher_tier_than = baron }
				character_event = { id = emf_regional.1 }
			}
		}
	}
}

# Recurses through ruler provinces
character_event = {
	id = emf_regional.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		or = {
			and = {
				not = { has_global_flag = emf_region_invert }
				any_demesne_province = { not = { has_province_flag = emf_region_sweep } }
			}
			and = {
				has_global_flag = emf_region_invert
				any_demesne_province = { has_province_flag = emf_region_sweep }
			}
		}
	}
	

	
	option = { # No event
		name = OK
		ai_chance = {
			factor = 96
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				or = {
					and = {
						not = { has_global_flag = emf_region_invert }
						location = { not = { has_province_flag = emf_region_sweep } }
					}
					and = {
						has_global_flag = emf_region_invert
						location = { has_province_flag = emf_region_sweep }
					}
				}
			}
			location = {
				if = {
					limit = { not = { has_global_flag = emf_region_invert } }
					set_province_flag = emf_region_sweep
				}
				if = {
					limit = { has_global_flag = emf_region_invert }
					clr_province_flag = emf_region_sweep
				}
			}
		}
		
		# Recurse
		character_event = { id = emf_regional.1 }
	}

	option = { # Event!
		name = OK
		ai_chance = {
			factor = 4
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				or = {
					and = {
						not = { has_global_flag = emf_region_invert }
						location = { not = { has_province_flag = emf_region_sweep } }
					}
					and = {
						has_global_flag = emf_region_invert
						location = { has_province_flag = emf_region_sweep }
					}
				}
			}
			location = {
				if = {
					limit = { not = { has_global_flag = emf_region_invert } }
					set_province_flag = emf_region_sweep
				}
				if = {
					limit = { has_global_flag = emf_region_invert }
					clr_province_flag = emf_region_sweep
				}
				
				# EMF Seasonal Events
				set_province_flag = emf_seasonal_event
				owner = { character_event = { id = emf_regional.2 } }
			}
		}
		
		# Recurse
		character_event = { id = emf_regional.1 }
	}
}

# Handout Event
character_event = {
	id = emf_regional.2
	hide_window = yes
	is_triggered_only = yes
	
	# Shared
	option = { # Heavy Rain
		name = OK
		ai_chance = {
			factor = 1
			modifier = { # Not in Winter
				factor = 0
				or = {
					month = 11 # At least December
					and = {
						month = 0
						not = { month = 2 } # Before March
					}
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.100 } }
			}
		}
	}
	option = { # Storms
		name = OK
		ai_chance = {
			factor = 1
			modifier = { # Not in Winter
				factor = 0
				or = {
					month = 11 # At least December
					and = {
						month = 0
						not = { month = 2 } # Before March
					}
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.101 } }
			}
		}
	}
	option = { # Drought
		name = OK
		ai_chance = {
			factor = 1
		}
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.102 } }
			}
		}
	}
	
	# Winter
	option = { # Heavy Snow
		trigger = {
			or = {
				month = 11 # At least December
				and = {
					month = 0
					not = { month = 2 } # Before March
				}
			}
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.200 } }
			}
		}
	}
	option = { # Blizzards
		trigger = {
			or = {
				month = 11 # At least December
				and = {
					month = 0
					not = { month = 2 } # Before March
				}
			}
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.201 } }
			}
		}
	}
	option = { # Mild Winter (warm)
		trigger = {
			or = {
				month = 11 # At least December
				and = {
					month = 0
					not = { month = 2 } # Before March
				}
			}
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.202 } }
			}
		}
	}
	option = { # Harsh Winter (cold)
		trigger = {
			or = {
				month = 11 # At least December
				and = {
					month = 0
					not = { month = 2 } # Before March
				}
			}
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.203 } }
			}
		}
	}
	
	# Spring
	option = { # Pleasant Spring (warm)
		trigger = {
			month = 2 # At least March
			not = { month = 5 } # Before June
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.250 } }
			}
		}
	}
	option = { # Cold Snap (cold)
		trigger = {
			month = 2 # At least March
			not = { month = 5 } # Before June
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.251 } }
			}
		}
	}
	
	# Summer
	option = { # Heat Wave (warm)
		trigger = {
			month = 5 # At least June
			not = { month = 8 } # Before September
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.300 } }
			}
		}
	}
	option = { # Mild Summer (cold)
		trigger = {
			month = 5 # At least June
			not = { month = 8 } # Before September
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.301 } }
			}
		}
	}
	option = { # Cloudy
		trigger = {
			month = 5 # At least June
			not = { month = 8 } # Before September
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.302 } }
			}
		}
	}
	option = { # Bright
		trigger = {
			month = 5 # At least June
			not = { month = 8 } # Before September
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.303 } }
			}
		}
	}
	
	# Autumn
	option = { # Mild Autumn (warm)
		trigger = {
			month = 8 # At least September
			not = { month = 11 } # Before December
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.350 } }
			}
		}
	}
	option = { # Early Cold (cold)
		trigger = {
			month = 8 # At least September
			not = { month = 11 } # Before December
		}
		name = OK
		ai_chance = {
			factor = 1
		}
		
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				owner = { character_event = { id = emf_regional.351 } }
			}
		}
	}
}

### Seasonal Events
# And don't forget, we'll probably want some weather/other modifier graphics!

# Seasons:
# Spring = March, April, May
# Summer = June, July, August
# Autumn = September, October, November
# Winter = December, January, February

# Terrain:
# Vanilla: steppe, jungle, forest, hills, plains, farmlands, mountain, desert, arctic
# SWMH: marsh, coastal_desert, woods

# Effects:
# Possible effects: Effective fort readiness on coastal provinces, trade value, tax modifiers, possibly movement speed (though the new local_speed_modifier), levy_sizes, attrition (supply_limit and max_attrition), and in particularly nasty cases increased revolt risk

# Rain: Bad for ripening or harvest, but good for growing (Heavy Rain is enough)
# Heavy Rain: Very bad for ripening or ready crops (Heavy Snow in Winter)
# Storms: Damage crops, bad for livestock (Blizzards in Winter)
# Cloudy: Poor effect on ripening crops (doesn't apply in Winter)
# Bright: Good for ripening crops (doesn't apply in Winter)
# Drought: Bad for everything
# Heat Wave: ? (Mild Winter in Winter)
# Unusually Cold: ? (Harsh Winter in Winter)

# Notification events might also substitute modifiers to get different localizations depending on terrain (so the localization for harsh winter might be different for jungle and desert) if, you know, that actually turns out to be a thing I want to do.

# Note that I might want to fill in some pure notification events here
# They'd be sent to neighboring province lieges or something, maybe, if I can find a way to do it without spamming

# I also might want to reduce the chance of spreading into provinces which already have seasonal modifiers

## General
# 100-149 reserved
# 100 - Heavy Rain
character_event = {
	id = emf_regional.100
	desc = emf_regional.100.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# Most provinces get Heavy Rain
				if = {
					limit = {
						not = { terrain = desert }
						not = { borders_major_river = yes }
						not = { port = yes }
					}
					add_province_modifier = {
						name = emf_mod_heavy_rain
						duration = 80
					}
				}
				# River Flooding
				if = {
					limit = { borders_major_river = yes }
					add_province_modifier = {
						name = emf_mod_river_flooding
						duration = 80
					}
				}
				# Coastal Flooding
				if = {
					limit = { port = yes }
					add_province_modifier = {
						name = emf_mod_coastal_flooding
						duration = 80
					}
				}
				# Deserts get their own Rain
				if = {
					limit = { terrain = desert }
					add_province_modifier = {
						name = emf_mod_desert_rain
						duration = 80
					}
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# Most provinces get Heavy Rain
					if = {
						limit = {
							not = { terrain = desert }
							not = { borders_major_river = yes }
							not = { port = yes }
						}
						add_province_modifier = {
							name = emf_mod_heavy_rain
							duration = 80
						}
					}
					# River Flooding
					if = {
						limit = { borders_major_river = yes }
						add_province_modifier = {
							name = emf_mod_river_flooding
							duration = 80
						}
					}
					# Coastal Flooding
					if = {
						limit = { port = yes }
						add_province_modifier = {
							name = emf_mod_coastal_flooding
							duration = 80
						}
					}
					# Deserts get their own Rain
					if = {
						limit = { terrain = desert }
						add_province_modifier = {
							name = emf_mod_desert_rain
							duration = 80
						}
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 101 - Storms
character_event = {
	id = emf_regional.101
	desc = emf_regional.101.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# Most provinces get Storms
				if = {
					limit = {
						not = { terrain = desert }
						not = { borders_major_river = yes }
						not = { port = yes }
					}
					add_province_modifier = {
						name = emf_mod_storms
						duration = 80
					}
				}
				# River Flooding
				if = {
					limit = { borders_major_river = yes }
					add_province_modifier = {
						name = emf_mod_river_flooding
						duration = 80
					}
				}
				# Coastal Flooding
				if = {
					limit = { port = yes }
					add_province_modifier = {
						name = emf_mod_coastal_flooding
						duration = 80
					}
				}
				# Deserts get Sandstorms
				if = {
					limit = { terrain = desert }
					add_province_modifier = {
						name = emf_mod_sandstorms
						duration = 80
					}
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# Most provinces get Storms
					if = {
						limit = {
							not = { terrain = desert }
							not = { borders_major_river = yes }
							not = { port = yes }
						}
						add_province_modifier = {
							name = emf_mod_storms
							duration = 80
						}
					}
					# River Flooding
					if = {
						limit = { borders_major_river = yes }
						add_province_modifier = {
							name = emf_mod_river_flooding
							duration = 80
						}
					}
					# Coastal Flooding
					if = {
						limit = { port = yes }
						add_province_modifier = {
							name = emf_mod_coastal_flooding
							duration = 80
						}
					}
					# Deserts get Sandstorms
					if = {
						limit = { terrain = desert }
						add_province_modifier = {
							name = emf_mod_sandstorms
							duration = 80
						}
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 102 - Drought
character_event = {
	id = emf_regional.102
	desc = emf_regional.102.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# Most provinces get Drought
				if = {
					limit = {
						not = { terrain = desert }
					}
					add_province_modifier = {
						name = emf_mod_drought
						duration = 80
					}
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# Most provinces get Drought
					if = {
						limit = {
							not = { terrain = desert }
						}
						add_province_modifier = {
							name = emf_mod_drought
							duration = 80
						}
					}
				}
			}
		}
	}
	
	option = { name = OK }
}

## Special
# 150-199 reserved
# Rats
# Wolves
# Landslides
# Avalanches
# Other?

## Winter
# 200-249 reserved
# 200 - Heavy Snow
character_event = {
	id = emf_regional.200
	desc = emf_regional.200.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# Most provinces get Heavy Snow
				if = {
					limit = {
						or = {
							not = { terrain = jungle }
							not = { terrain = desert }
						}
					}
					add_province_modifier = {
						name = emf_mod_heavy_snow
						duration = 80
					}
				}
				# Desert and Jungle get Heavy Rains
				if = {
					limit = {
						or = {
							terrain = jungle
							terrain = desert
						}
					}
					add_province_modifier = {
						name = emf_mod_heavy_rain
						duration = 80
					}
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# Most provinces get Heavy Snow
					if = {
						limit = {
							not = { terrain = jungle }
							not = { terrain = desert }
						}
						add_province_modifier = {
							name = emf_mod_heavy_snow
							duration = 80
						}
					}
					# Desert and Jungle get Heavy Rains
					if = {
						limit = {
							or = {
								terrain = jungle
								terrain = desert
							}
						}
						add_province_modifier = {
							name = emf_mod_heavy_rain
							duration = 80
						}
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 201 - Blizzards
character_event = {
	id = emf_regional.201
	desc = emf_regional.201.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# Most provinces get Blizzards
				if = {
					limit = {
						not = { terrain = jungle }
						not = { terrain = desert }
					}
					add_province_modifier = {
						name = emf_mod_blizzards
						duration = 80
					}
				}
				# Desert and Jungle get Storms
				if = {
					limit = {
						or = {
							terrain = jungle
							terrain = desert
						}
					}
					add_province_modifier = {
						name = emf_mod_storms
						duration = 80
					}
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# Most provinces get Blizzards
					if = {
						limit = {
							or = {
								not = { terrain = jungle }
								not = { terrain = desert }
							}
						}
						add_province_modifier = {
							name = emf_mod_blizzards
							duration = 80
						}
					}
					# Desert and Jungle get Storms
					if = {
						limit = {
							or = {
								terrain = jungle
								terrain = desert
							}
						}
						add_province_modifier = {
							name = emf_mod_storms
							duration = 80
						}
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 202 - Mild Winter (warm)
character_event = {
	id = emf_regional.202
	desc = emf_regional.202.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Mild Winter
				add_province_modifier = {
					name = emf_mod_mild_winter
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Mild Winter
					add_province_modifier = {
						name = emf_mod_mild_winter
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 203 - Harsh Winter (cold)
character_event = {
	id = emf_regional.203
	desc = emf_regional.203.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Harsh Winter
				add_province_modifier = {
					name = emf_mod_harsh_winter
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Harsh Winter
					add_province_modifier = {
						name = emf_mod_harsh_winter
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}

## Spring
# 250-299 reserved
# 250 - Pleasant Spring
character_event = {
	id = emf_regional.250
	desc = emf_regional.250.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Pleasant Spring
				add_province_modifier = {
					name = emf_mod_pleasant_spring
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Pleasant Spring
					add_province_modifier = {
						name = emf_mod_pleasant_spring
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 251 - Long Winter
character_event = {
	id = emf_regional.251
	desc = emf_regional.251.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Long Winter
				add_province_modifier = {
					name = emf_mod_long_winter
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Long Winter
					add_province_modifier = {
						name = emf_mod_long_winter
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}

## Summer
# 300-349 reserved
# 300 - Heat Wave
character_event = {
	id = emf_regional.300
	desc = emf_regional.300.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Heat Wave
				add_province_modifier = {
					name = emf_mod_heat_wave
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Heat Wave
					add_province_modifier = {
						name = emf_mod_heat_wave
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 301 - Mild Summer
character_event = {
	id = emf_regional.301
	desc = emf_regional.301.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Mild Summer
				add_province_modifier = {
					name = emf_mod_mild_summer
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Mild Summer
					add_province_modifier = {
						name = emf_mod_mild_summer
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 302 - Cloudy
character_event = {
	id = emf_regional.302
	desc = emf_regional.302.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Cloudy
				add_province_modifier = {
					name = emf_mod_cloudy
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Cloudy
					add_province_modifier = {
						name = emf_mod_cloudy
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 303 - Bright
character_event = {
	id = emf_regional.303
	desc = emf_regional.303.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Bright
				add_province_modifier = {
					name = emf_mod_bright
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Bright
					add_province_modifier = {
						name = emf_mod_bright
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}

## Autumn
# 350-399 reserved
# 350 - Warm Autumn
character_event = {
	id = emf_regional.350
	desc = emf_regional.350.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Warm Autumn
				add_province_modifier = {
					name = emf_mod_warm_autumn
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Warm Autumn
					add_province_modifier = {
						name = emf_mod_warm_autumn
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
# 351 - Early Winter
character_event = {
	id = emf_regional.351
	desc = emf_regional.351.desc
	picture = GFX_evt_siege
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = count
				location = { has_province_flag = emf_seasonal_event }
			}
			location = {
				clr_province_flag = emf_seasonal_event
				# All provinces get Early Winter
				add_province_modifier = {
					name = emf_mod_early_winter
					duration = 80
				}
				any_neighbor_province = {
					if = {
						limit = { not = { has_global_flag = emf_region_invert } }
						set_province_flag = emf_region_sweep
					}
					if = {
						limit = { has_global_flag = emf_region_invert }
						clr_province_flag = emf_region_sweep
					}
					# All provinces get Early Winter
					add_province_modifier = {
						name = emf_mod_early_winter
						duration = 80
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
